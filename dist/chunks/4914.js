"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4914],{84914:(e,i,t)=>{t.r(i),t.d(i,{default:()=>_});var s=t(23324),h=t(13470),r=t(82640),a=t(43388),n=t(72278),o=(t(20337),t(76997),t(89847),t(32780),t(48973),t(56793)),d=t(58702),l=t(60722),g=t(19853),c=t(4311);const p=["routeInfo","directionLines","directionPoints","polygonBarriers","polylineBarriers","pointBarriers","stops"],u=Object.freeze({remove(){},pause(){},resume(){}});let f=class extends((0,d.y)(c.Z)){constructor(){super(...arguments),this._graphicsViews=new Map,this._highlightIds=new Map}attach(){for(const e of p)this.handles.add((0,n.YP)((()=>(0,a.pC)(this.layer[e])?"routeInfo"===e?[(0,a.Wg)(this.layer[e])]:(0,a.Wg)(this.layer[e]).toArray():null),(i=>this._createGraphicsView(e,i)),n.nn),e)}detach(){this._destroyGraphicsViews()}highlight(e){let i;return"number"==typeof e?i=[e]:e instanceof h.Z?i=[e.uid]:Array.isArray(e)&&e.length>0?i="number"==typeof e[0]?e:e.map((e=>e&&e.uid)):r.Z.isCollection(e)&&(i=e.map((e=>e&&e.uid)).toArray()),i=i.filter((e=>null!=e)),i.length?(this._addHighlight(i),{remove:()=>this._removeHighlight(i)}):u}async hitTest(e,i){if(this.suspended||!this._graphicsViews.size)return Promise.resolve(null);const t=Array.from(this._graphicsViews.values()).reverse().map((i=>i.hitTest(e))).flat().filter((e=>!!e));for(const e of t)e.layer=this.layer,e.sourceLayer=this.layer;return t}moveStart(){}moveEnd(){}update(e){for(const i of this._graphicsViews.values())i.processUpdate(e)}viewChange(){for(const e of this._graphicsViews.values())e.viewChange()}isUpdating(){for(const e of this._graphicsViews.values())if(e.updating)return!0;return!1}_createGraphicsView(e,i){this._destroyGraphicsView(e);const t=this.view,s=new r.Z((0,a.pC)(i)?i.map((e=>{const{attributes:i,geometry:t,symbol:s,popupInfo:r}=e.toPortalJSON();return h.Z.fromJSON({attributes:i,geometry:t,symbol:s,popupTemplate:r})})):[]),o=new l.Z(t.featuresTilingScheme),d=new g.Z({container:o,graphics:s,requestUpdateCallback:()=>this.requestUpdate(),view:t});this._graphicsViews.set(e,d),this.container.addChildAt(o,p.indexOf(e)),this._updateHighlight(),this.handles.add([(0,n.YP)((()=>d.updating),(()=>this.notifyChange("updating")),n.nn)],`updating-${e}`)}_destroyGraphicsView(e){if(!this._graphicsViews.has(e))return;const i=this._graphicsViews.get(e);this.container.removeChild(i.container),i.destroy(),this.handles.remove(`updating-${e}`),this._graphicsViews.delete(e)}_destroyGraphicsViews(){this.container.removeAllChildren();for(const[e,i]of this._graphicsViews.entries())this.handles.remove(e),i.destroy();this._graphicsViews.clear()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this._graphicsViews.values())i.setHighlight(e)}};f=(0,s._)([(0,o.j)("esri.views.2d.layers.RouteLayerView2D")],f);const _=f},60722:(e,i,t)=>{t.d(i,{Z:()=>r});var s=t(78281),h=t(52554);class r extends h.Z{renderChildren(e){this.attributeView.bindTextures(e.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(e),e.drawPhase===s.jx.MAP&&this._renderChildren(e),this.hasHighlight()&&e.drawPhase===s.jx.HIGHLIGHT&&this._renderHighlight(e),this._boundsRenderer&&this._boundsRenderer.doRender(e))}_renderHighlight(e){const{painter:i}=e,t=i.effects.highlight;t.bind(e),this._renderChildren(e,t.defines),t.draw(e),t.unbind()}}}}]);